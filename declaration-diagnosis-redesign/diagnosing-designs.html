<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>10&nbsp; Diagnosing designs – Research Design in the Social Sciences</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../declaration-diagnosis-redesign/redesigning.html" rel="next">
<link href="../declaration-diagnosis-redesign/choosing-answer-strategy.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-72c93205fb41c15e2e398b4f9a505ee2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MMK8CF9JC0"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-MMK8CF9JC0', { 'anonymize_ip': true});
</script><style type="text/css" media="print">
    body { visibility: hidden; display: none }
</style>
<script type="text/javascript">
    function createCookie(name, value, days) {
        var expires;
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (7 * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toGMTString();
        }
        else {
            expires = "";
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    }
    
    function getCookie(c_name) {
        if (document.cookie.length > 0) {
            c_start = document.cookie.indexOf(c_name + "=");
            if (c_start != -1) {
                c_start = c_start + c_name.length + 1;
                c_end = document.cookie.indexOf(";", c_start);
                if (c_end == -1) {
                    c_end = document.cookie.length;
                }
                return unescape(document.cookie.substring(c_start, c_end));
            }
        }
        return "";
    }
    window.onload = () => {
      if (getCookie('popupShown') != 'yes') {
        const myModal = new bootstrap.Modal('#exampleModal');
        myModal.show();
        createCookie('popupShown', 'yes', 1)
      }
    }
</script><script src="../site_libs/kePrint-0.0.1/kePrint.js"></script><link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../declaration-diagnosis-redesign/declaring-designs.html">Declaration, Diagnosis, Redesign</a></li><li class="breadcrumb-item"><a href="../declaration-diagnosis-redesign/diagnosing-designs.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Diagnosing designs</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Research Design in the Social Sciences</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../authors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About the authors</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../acknowledgements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Acknowledgements</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../introduction/preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preface</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../introduction/what-is-a-research-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">What is a research design?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../introduction/research-design-principles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Research design principles</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../introduction/getting-started.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Getting started</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Declaration, Diagnosis, Redesign</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../declaration-diagnosis-redesign/declaring-designs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Declaring designs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../declaration-diagnosis-redesign/specifying-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Specifying the model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../declaration-diagnosis-redesign/defining-inquiry.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Defining the inquiry</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../declaration-diagnosis-redesign/crafting-data-strategy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Crafting a data strategy</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../declaration-diagnosis-redesign/choosing-answer-strategy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Choosing an answer strategy</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../declaration-diagnosis-redesign/diagnosing-designs.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Diagnosing designs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../declaration-diagnosis-redesign/redesigning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Redesigning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../declaration-diagnosis-redesign/design-example.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Design example</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../declaration-diagnosis-redesign/declaration-in-code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Designing in code</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../library/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Research design library</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../library/observational-descriptive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Observational : descriptive</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../library/observational-causal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Observational : causal</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../library/experimental-descriptive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Experimental : descriptive</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../library/experimental-causal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Experimental : causal</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../library/complex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Complex designs</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../lifecycle/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Research design lifecycle</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lifecycle/planning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Planning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lifecycle/realization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Realization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lifecycle/integration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Integration</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../epilogue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Epilogue</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../student-teacher.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Student and teacher resources</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../errata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Errata</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<p align="center">
<a style="color: black; text-decoration: none; font-size: 17px" target="_new" href="https://press.princeton.edu/books/paperback/9780691199573/research-design-in-the-social-sciences"> <img style="border: 1px solid darkgray; margin-bottom: 5px" width="100px" src="../figures/cover.jpg"><br>Buy book</a>
</p>
</div></div>
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#elements-of-diagnoses" id="toc-elements-of-diagnoses" class="nav-link active" data-scroll-target="#elements-of-diagnoses"><span class="header-section-number">10.1</span> Elements of diagnoses</a>
  <ul class="collapse">
<li><a href="#diagnosand-statistics" id="toc-diagnosand-statistics" class="nav-link" data-scroll-target="#diagnosand-statistics"><span class="header-section-number">10.1.1</span> Diagnosand statistics</a></li>
  <li><a href="#diagnosands" id="toc-diagnosands" class="nav-link" data-scroll-target="#diagnosands"><span class="header-section-number">10.1.2</span> Diagnosands</a></li>
  </ul>
</li>
  <li><a href="#sec-ch10s2" id="toc-sec-ch10s2" class="nav-link" data-scroll-target="#sec-ch10s2"><span class="header-section-number">10.2</span> Types of diagnosands</a></li>
  <li>
<a href="#estimation-of-diagnosands" id="toc-estimation-of-diagnosands" class="nav-link" data-scroll-target="#estimation-of-diagnosands"><span class="header-section-number">10.3</span> Estimation of diagnosands</a>
  <ul class="collapse">
<li><a href="#analytic-design-diagnosis" id="toc-analytic-design-diagnosis" class="nav-link" data-scroll-target="#analytic-design-diagnosis"><span class="header-section-number">10.3.1</span> Analytic design diagnosis</a></li>
  <li><a href="#design-diagnosis-by-simulation" id="toc-design-diagnosis-by-simulation" class="nav-link" data-scroll-target="#design-diagnosis-by-simulation"><span class="header-section-number">10.3.2</span> Design diagnosis by simulation</a></li>
  <li><a href="#sec-ch10s3ss3" id="toc-sec-ch10s3ss3" class="nav-link" data-scroll-target="#sec-ch10s3ss3"><span class="header-section-number">10.3.3</span> Simulation error</a></li>
  </ul>
</li>
  <li>
<a href="#how-to-diagnose-designs" id="toc-how-to-diagnose-designs" class="nav-link" data-scroll-target="#how-to-diagnose-designs"><span class="header-section-number">10.4</span> How to diagnose designs</a>
  <ul class="collapse">
<li><a href="#sec-ch10s4ss1" id="toc-sec-ch10s4ss1" class="nav-link" data-scroll-target="#sec-ch10s4ss1"><span class="header-section-number">10.4.1</span> Exploring design tradeoffs</a></li>
  <li><a href="#sec-ch10s4ss2" id="toc-sec-ch10s4ss2" class="nav-link" data-scroll-target="#sec-ch10s4ss2"><span class="header-section-number">10.4.2</span> Diagnosis under model uncertainty</a></li>
  <li><a href="#adjudicating-between-competing-models" id="toc-adjudicating-between-competing-models" class="nav-link" data-scroll-target="#adjudicating-between-competing-models"><span class="header-section-number">10.4.3</span> Adjudicating between competing models</a></li>
  </ul>
</li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">10.5</span> Summary</a></li>
  </ul><div class="quarto-code-links"><h2>Code Links</h2><ul><li><a href="https://doi.org/10.7910/DVN/HYVPO5"><i class="bi bi-database-fill"></i>Replication data and code</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body" style="text-align: center">
        <img width="400px" src="https://book.declaredesign.org/figures/cover.jpg" style="margin-bottom: 15px"><br>
        Available from Princeton University Press
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <!--<button type="button" class="btn btn-primary">Buy book</button>-->
        <a href="https://www.amazon.com/Research-Design-Social-Sciences-Declaration/dp/0691199574/?&amp;_encoding=UTF8&amp;tag=declaredesign-20&amp;linkCode=ur2&amp;linkId=84be1f952d1d7aaaa5be867eade93474&amp;camp=1789&amp;creative=9325" target="_blank" class="btn btn-info" role="button">Amazon</a>
        <a href="https://press.princeton.edu/books/paperback/9780691199573/research-design-in-the-social-sciences" target="_blank" class="btn btn-info" role="button">Princeton University Press</a>
      </div>
    </div>
  </div>
</div>

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../declaration-diagnosis-redesign/declaring-designs.html">Declaration, Diagnosis, Redesign</a></li><li class="breadcrumb-item"><a href="../declaration-diagnosis-redesign/diagnosing-designs.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Diagnosing designs</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-ch10" class="quarto-section-identifier"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Diagnosing designs</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>Research design diagnosis is the process of evaluating the properties of a research design. We invent the term “diagnosand” to refer to those properties of a research design we would like to diagnose. Many diagnosands are familiar. Power is the probability of obtaining a statistically significant result. Bias is the average deviation of estimates from the estimand. Other diagnosands are more exotic, like the Type-S error rate, which is the probability the estimate has the incorrect sign, conditional on being statistically significant <span class="citation" data-cites="Gelman2014b">(<a href="../references.html#ref-Gelman2014b" role="doc-biblioref">Gelman and Carlin 2014</a>)</span>. This chapter focuses mainly on the use of Monte Carlo computer simulations to estimate diagnosands, though we touch on analytic design diagnosis as well.</p>
<p>Research designs are strong when the empirical answer <span class="math inline">\(a_{d^*}\)</span> generated by the design is guaranteed to be close to the true answer <span class="math inline">\(a_{m^*}\)</span>. In general, we cannot know either <span class="math inline">\(a_{d^*}\)</span> or <span class="math inline">\(a_{m^*}\)</span> in advance. This problem means we have to assess the performance of our designs, not with respect to the real world, but instead with respect to our unverified and unverifiable beliefs about the world. We can do this using simulation, assessing the properties of research designs by comparing the simulated answer <span class="math inline">\(a_d\)</span> to the answers under the model <span class="math inline">\(a_m\)</span>, over many possible realizations of the design.</p>
<p><a href="#fig-ch10num1" class="quarto-xref">Figure&nbsp;<span>10.1</span></a> below is similar to <a href="declaring-designs.html#fig-ch2num1" class="quarto-xref">Figure&nbsp;<span>5.1</span></a>, which we described when defining the components of a research design. To recapitulate the main points of that discussion: The theoretical half of a research design defines an inquiry <em>I</em> in terms of a model <em>M</em>; the true answer to that question is the inquiry applied to the real world <span class="math inline">\(I(m^*) = a_{m^*}\)</span>; the empirical half of a research design applies the data strategy to the real world to generate a dataset (<span class="math inline">\(D(m^*) = d^*\)</span>), then applies the answer strategy to the realized dataset to generate an answer, (<span class="math inline">\(A(d^*) = a_{d^*}\)</span>). The asterisks reflect the fact that <em>reality</em> plays an important role in empirical research designs. We commit to the notion that there are <em>real</em> answers to the questions we have posed. Our empirical answers are tethered to reality because the data strategy generates information that depends on the real world.</p>
<p>When we simulate and diagnose designs, however, this tether to reality is snipped, and we find ourselves in the bottom half of <a href="#fig-ch10num1" class="quarto-xref">Figure&nbsp;<span>10.1</span></a>. When we simulate, the theoretical half of the design entertains many possibilities in the model set <em>M</em>, which we label <span class="math inline">\(m_1\)</span>, <span class="math inline">\(m_2\)</span>, …, <span class="math inline">\(m_k\)</span>, indexed by <span class="math inline">\(j\)</span>. Each of the <span class="math inline">\(k\)</span> possibilities generates a different answer to the inquiry: <span class="math inline">\(a_{m_1}\)</span>, <span class="math inline">\(a_{m_2}\)</span>, …, <span class="math inline">\(a_{m_k}\)</span>. Importantly, the simulated research design does not have access to the true answer <span class="math inline">\(a_{m^*}\)</span>, but has access only to answers under the <span class="math inline">\(k\)</span> considered models.</p>
<p>We pause to address one confusing aspect of our notation. The set of models <span class="math inline">\(m_1\)</span>, <span class="math inline">\(m_2\)</span>, …, <span class="math inline">\(m_k\)</span> could refer to a set of <span class="math inline">\(k\)</span> separate theoretical perspectives. Or it could refer to <span class="math inline">\(m_1\)</span>, <span class="math inline">\(m_2\)</span>, …, <span class="math inline">\(m_k\)</span> draws from the same basic model, but the values of the exogenous variables (following the specific meaning described in <a href="specifying-model.html#sec-ch6s1ss1" class="quarto-xref"><span>Section 6.1.1</span></a>) are different. In other words, our notation doesn’t draw a formal distinction between large differences between benchmark models and small ones.</p>
<p>When we simulate, the empirical half of the design is similarly dissociated from reality. We apply the data strategy <span class="math inline">\(D\)</span> to each of the model draws <span class="math inline">\(m_k\)</span> to produce simulated datasets indexed as <span class="math inline">\(d_k\)</span>. These fabricated datasets may be similar to or different from the true dataset <span class="math inline">\(d^*\)</span> that would result if the design were realized (the more similar the better). We apply the answer strategy <em>A</em> to each simulated dataset <span class="math inline">\(d_j\)</span> in order to produce simulated answers <span class="math inline">\(a_{d_j}\)</span>.</p>
<p>A comparison of the top row to the bottom three rows of <a href="#fig-ch10num1" class="quarto-xref">Figure&nbsp;<span>10.1</span></a> shows how actual research designs differ from simulated research designs. Actual research designs are influenced by reality: we learn about the real world by conducting empirical research. We don’t learn about the real world from simulated research designs. Instead, we learn about research designs themselves. We learn how the research design would behave <em>if</em> the real world <span class="math inline">\(m^*\)</span> were like the model draw <span class="math inline">\(m_1\)</span>—or like <span class="math inline">\(m_{100}\)</span>. The diagnosis of the design is then a summary of the performance of the model over the multiple models in M. Of course, we only diagnose under the possibilities we consider in <span class="math inline">\(M\)</span>. If the world <span class="math inline">\(m^*\)</span> is not in that set of possibilities, we won’t have evaluated the design under the most important setting, i.e., in reality. We want to follow <a href="../introduction/research-design-principles.html#exm-designagnostically" class="quarto-xref">Principle&nbsp;<span>3.2</span></a> to “design agnostically” or in order words, to consider such a wide range of possibilities that some <span class="math inline">\(a_{m_j}\)</span> will be close enough to <span class="math inline">\(a_{m^*}\)</span>.</p>
<div id="fig-ch10num1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-ch10num1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../figures/figure-10-1.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figure&nbsp;10.1: Simulations in the MIDA framework"><img src="../figures/figure-10-1.svg" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ch10num1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10.1: Simulations in the <em>MIDA</em> framework
</figcaption></figure>
</div>
<p>With this definition of a diagnosis in hand, we can now sharpen our thinking on when we have a complete design declaration. A design declaration is “diagnosand-complete” when the declaration contains enough information to calculate a specific diagnosand, or a statistic about the design. The “bias” diagnosand requires that all four of <em>M</em>, <em>I</em>, <em>D</em>, and <em>A</em> are specified in sufficient detail because we need to be able to compare the answer under the model (<span class="math inline">\(a_m\)</span>) to the simulated empirical answer (<span class="math inline">\(a_d\)</span>). The “statistical power” diagnosand often does not require the inquiry <span class="math inline">\(I\)</span> to be specified, since we can mechanistically conduct null hypothesis significance tests without reference to inquiries. Neither the “bias” nor “statistical power” diagnosands require any details of confidence interval construction, but without those details, the declaration is not diagnosand-complete for “coverage,” which assesses the quality of the standard error estimator by checking how often the confidence intervals cover the true value.</p>
<p>Every design we have ever declared is diagnosand-complete for some diagnosands, but not for others. Diagnosand-completeness for every common diagnosand is not a goal for design declaration. We want to be diagnosand-complete for the set of diagnosands that matter most in a particular research setting.</p>
<section id="elements-of-diagnoses" class="level2" data-number="10.1"><h2 data-number="10.1" class="anchored" data-anchor-id="elements-of-diagnoses">
<span class="header-section-number">10.1</span> Elements of diagnoses</h2>
<section id="diagnosand-statistics" class="level3" data-number="10.1.1"><h3 data-number="10.1.1" class="anchored" data-anchor-id="diagnosand-statistics">
<span class="header-section-number">10.1.1</span> Diagnosand statistics</h3>
<p>Diagnosands are summaries of the distributions of diagnostic statistics. We’ll start by defining diagnostic statistics, then move on to describing how to generate the distribution of diagnostic statistics, then how to summarize those distributions in order to estimate diagnosands.</p>
<p>A diagnostic statistic <span class="math inline">\(\phi_j\)</span> is itself a function of <span class="math inline">\(a_{m_j}\)</span> and <span class="math inline">\(a_{d_j}\)</span>: <span class="math inline">\(\phi_j = g(a_{m_j}, a_{d_j})\)</span>. We elide here two important notational annoyances. For the purpose of the following discussion of diagnostic statistics and diagnosands, <span class="math inline">\(a_{d_j}\)</span> can refer to an estimate like a difference-in-means estimate or an associated uncertainty statistic like a standard error or a <span class="math inline">\(p\)</span>-value. Importantly, diagnostic statistics can be functions that depend on <span class="math inline">\(a_{m_j}\)</span> only, <span class="math inline">\(a_{d_j}\)</span> only, or both.</p>
<p>Each diagnostic statistic is the result of a different function <span class="math inline">\(g\)</span>. For example, the “error” diagnostic statistic is produced by this function: <span class="math inline">\(g(a_{m_j}, a_{d_j}) = a_{d_j} - a_{m_j}\)</span>. The “significant” diagnostic statistic is <span class="math inline">\(g(a_{d_j}) = \mathbf{I}[p(a_{d_j}) \leq \alpha]\)</span>, where <span class="math inline">\(p()\)</span> is a function of the empirical answer that returns a <span class="math inline">\(p\)</span>-value, <span class="math inline">\(\alpha\)</span> is a significance cutoff, and <span class="math inline">\(\mathbf{I}\)</span> is an indicator function that returns 1 when the <span class="math inline">\(p\)</span>-value is below the cutoff and <span class="math inline">\(0\)</span> when it is above. A diagnostic statistic is something that can be calculated on the basis of a single run of the design.</p>
<p>Typically, diagnostic statistics will be different from simulation to simulation. In other words, <span class="math inline">\(\phi_1\)</span> will be different from <span class="math inline">\(\phi_2\)</span>, <span class="math inline">\(\phi_2\)</span> will be different from <span class="math inline">\(\phi_3\)</span>, and so on. These differences arise partially from the variation in <em>M</em>: <span class="math inline">\(m_1\)</span> is different from <span class="math inline">\(m_2\)</span>, <span class="math inline">\(m_2\)</span> is different from <span class="math inline">\(m_3\)</span>, and so on. Differences can also arise from the explicitly random procedures in <span class="math inline">\(D\)</span>: sampling, assignment, and measurement can all include stochastic elements that will ramify through to the diagnostic statistics. As a result of these sources of variation, a diagnostic statistic is a random variable <span class="math inline">\(\Phi\)</span>.</p>
</section><section id="diagnosands" class="level3" data-number="10.1.2"><h3 data-number="10.1.2" class="anchored" data-anchor-id="diagnosands">
<span class="header-section-number">10.1.2</span> Diagnosands</h3>
<p>A diagnosand is a summary of the distribution of <span class="math inline">\(\Phi\)</span>, written <span class="math inline">\(f(\Phi)\)</span>. For example, the expectation function <span class="math inline">\(\mathbb{E}[\Phi]\)</span> reports the expectation (the mean) of <span class="math inline">\(\Phi\)</span>.</p>
<p>Let’s now work through two concrete examples of common diagnosands: bias and power (see <a href="#sec-ch10s2" class="quarto-xref"><span>Section 10.2</span></a> for a more exhaustive list).</p>
<p>Consider the diagnosand “bias” in the context of a two-arm randomized trial where the inquiry is the average treatment effect, the data strategy entails complete random assignment, and the answer strategy is the difference-in-means. Bias is the average difference between the estimand and the estimate. Under a single realization <span class="math inline">\(m_j\)</span> of the model <em>M</em>, the value of the ATE will be a particular number, which we call <span class="math inline">\(a_{m_j}\)</span>. We simulate a random assignment and measurement of observed outcomes, then apply the difference-in-means estimator. The diagnostic statistic is the error <span class="math inline">\(a_{d_j} - a_{m_j}\)</span>; this error is a random variable because each <span class="math inline">\(m_j\)</span> differs slightly. The bias diagnosand is the expectation of this random variable is <span class="math inline">\(\mathbb{E}[a_{d_j} - a_{m_j}]\)</span>, where the expectation is taken over the randomization distribution implied by <em>M</em> and <em>D</em> (or distinct regions of the randomization distribution).</p>
<p>Now consider the diagnosand “power.” Like bias, statistical power is an expectation, this time of the “significant” diagnostic statistic <span class="math inline">\(\mathbf{I}(p(a_{d_k}) \leq 0.05)\)</span>. Power describes how frequently the answer strategy will return a statistically significant result. Some textbooks define statistical power as one minus the Type II error rate, where a Type II error is the failure to reject the null hypothesis, given that the null hypothesis is false. This definition is accurate, but hard to understand. The phrase “given that the null hypothesis is false” could refer to any number of model possibilities (<span class="math inline">\(a_{m_j}\)</span>’s) in which the null hypothesis does not hold. Our definition of power is instead, “the probability of getting a statistically significant result, conditional on a set of beliefs about the model.”</p>
<p>Uncertainty statistics like standard errors can be thought of as empirical estimates of diagnosands describing the quality of your design under some set of models.</p>
<p>Suppose we report that the estimate is equal to 15 and carries with it a standard error of 6. Here we are communicating that we now think our design has the property that, if we were to run it over and over, the standard deviation of our estimates would be 6. That is, if we were to fix the design at a particular <span class="math inline">\(m\)</span> and combine it with <em>I</em>, <em>D</em>, and <em>A</em>, the standard deviation of the estimates across simulations of the design would be 6.</p>
<p>Likewise, estimated <span class="math inline">\(p\)</span>-values can also be thought of as estimates of a peculiar diagnosand: the probability of obtaining a test statistic of a particular value, under a maintained null model. That is, if we were to write down a null model <span class="math inline">\(m_{0}\)</span> under which the estimand were in fact zero, then combined it with <em>I</em>, <em>D</em>, and <em>A</em>, we could diagnose that design to learn the fraction of estimates that are as large or larger than 15—a <span class="math inline">\(p\)</span>-value.</p>
<p>Thinking about <span class="math inline">\(p\)</span>-values as diagnosands can be seen most directly in the randomization inference approach to hypothesis testing. Randomization inference often considers “sharp” null hypotheses in which we impute the missing potential outcomes with exactly their observed values, then simulate all the ways the design could come out holding <em>I</em>, <em>D</em>, and <em>A</em> constant. The <span class="math inline">\(p\)</span>-value is the fraction of simulations in which the null model generates estimates that are more extreme than the observed estimate, with variation in estimates arising from different assignments to treatment. See <a href="choosing-answer-strategy.html#sec-ch9s3ss5" class="quarto-xref"><span>Section 9.3.2.1</span></a> for a worked example of this approach.</p>
<p>The payoff from thinking about uncertainty statistics as estimates of diagnosands is in drawing attention to the fact that uncertainty statistics can be poor estimators of diagnosands and to the fact that their performance can be assessed. For example, social scientists criticize one another’s choice of standard error—classical or robust, clustered or not, bootstrapped, jackknifed, and on and on. The reason for this debate is that when the procedures we follow to form uncertainty statistics are inappropriate for the design setting, we can be falsely confident in our answers.</p>
<div id="fig-ch10num2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-ch10num2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../figures/figure-10-2.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Figure&nbsp;10.2: Why robust standard errors are preferred to classical standard errors"><img src="../figures/figure-10-2.svg" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ch10num2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10.2: Why robust standard errors are preferred to classical standard errors
</figcaption></figure>
</div>
<p><a href="#fig-ch10num2" class="quarto-xref">Figure&nbsp;<span>10.2</span></a> illustrates what’s at stake in the age-old contest between classical standard errors and robust standard errors. Here we are in the context of a two-arm trial under three settings: the control potential outcomes are higher variance, the groups have the same variances, or the treated outcomes have higher variance. The calculation for classical standard errors pools the data from both groups when estimating a variance, thereby assuming “homoskedasticity,” a Greek work for having the “same spread.” This estimation choice leads to poor performance. Depending on the fraction of the sample that receives treatment, the estimate of the sampling distribution can be upwardly biased (conservative) or downwardly biased (anti-conservative or falsely confident). We’re usually worried about standard error estimates being too small because anti-conservatism is probably worse for scientific communication than conservatism.</p>
<p>Robust standard errors are “heteroskedasticity-robust,” which means that the estimation does not assume that the two groups have the same error variance. <span class="citation" data-cites="samii2012equivalencies">Samii and Aronow (<a href="../references.html#ref-samii2012equivalencies" role="doc-biblioref">2012</a>)</span> show that a particular variant of robust standard errors (HC2) is exactly equal to the Neyman variance estimator described in <a href="redesigning.html#sec-ch10s3ss1" class="quarto-xref"><span>Section 11.3.1</span></a>, which is why HC2 robust standard errors are the default in the <code>lm_robust</code> function. The bottom row of <a href="#fig-ch10num2" class="quarto-xref">Figure&nbsp;<span>10.2</span></a> shows that the robust standard error estimator hews closely to the true value of the diagnosand in all of the design settings considered. We prefer robust SEs because they do not impose extra model assumptions like homoskedasticity that are not grounded in any particular design feature.</p>
</section></section><section id="sec-ch10s2" class="level2" data-number="10.2"><h2 data-number="10.2" class="anchored" data-anchor-id="sec-ch10s2">
<span class="header-section-number">10.2</span> Types of diagnosands</h2>
<p>As described above, a diagnostic statistic is any summary function of <span class="math inline">\(a_m\)</span> and <span class="math inline">\(a_d\)</span>, and a diagnosand is any summary of the distribution of diagnostic statistics. As a result, there are a great many diagnosands researchers may consider. In <a href="#tbl-diagnosticstatistics" class="quarto-xref">Table&nbsp;<span>10.1</span></a>, we introduce a nonexhaustive set of diagnostic statistics, and in <a href="#tbl-diagnosands" class="quarto-xref">Table&nbsp;<span>10.2</span></a> a nonexhaustive set of diagnosands.</p>
<div id="tbl-diagnosticstatistics" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-diagnosticstatistics-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.1: Examples of diagnostic statistics.
</figcaption><div aria-describedby="tbl-diagnosticstatistics-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 42%">
<col style="width: 57%">
</colgroup>
<thead><tr class="header">
<th>Diagnostic statistic</th>
<th>Definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Estimate</td>
<td><span class="math inline">\(a_{d_k}\)</span></td>
</tr>
<tr class="even">
<td>Estimand under the model</td>
<td><span class="math inline">\(a_{m_k}\)</span></td>
</tr>
<tr class="odd">
<td>
<span class="math inline">\(p\)</span>-value</td>
<td><span class="math inline">\(p(a_{d_k})\)</span></td>
</tr>
<tr class="even">
<td>
<span class="math inline">\(p\)</span>-value is no greater than <span class="math inline">\(\alpha\)</span>
</td>
<td><span class="math inline">\(\mathbf{I}(p \leq \alpha)\)</span></td>
</tr>
<tr class="odd">
<td>Confidence interval</td>
<td><span class="math inline">\(\mathrm{CI}_{1-\alpha}\)</span></td>
</tr>
<tr class="even">
<td>Confidence interval covers the estimand under the model</td>
<td><span class="math inline">\(\mathrm{covers}_{a_m} \equiv \mathbb{I}\{ a_m \in \mathrm{CI}_{1-\alpha} \}\)</span></td>
</tr>
<tr class="odd">
<td>Estimated standard error</td>
<td><span class="math inline">\(\widehat\sigma(A)\)</span></td>
</tr>
<tr class="even">
<td>Cost</td>
<td><span class="math inline">\(\mathrm{cost}\)</span></td>
</tr>
<tr class="odd">
<td>Proportion of subjects harmed</td>
<td><span class="math inline">\(\Pr(\mathrm{harm}) \equiv \frac{1}{n} \sum_i \mathrm{harm_i}\)</span></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div id="tbl-diagnosands" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-diagnosands-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.2: Examples of iagnosands.
</figcaption><div aria-describedby="tbl-diagnosands-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 54%">
<col style="width: 29%">
</colgroup>
<thead><tr class="header">
<th>Diagnosand</th>
<th>Description</th>
<th>Definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Average estimate</td>
<td></td>
<td><span class="math inline">\(\mathbb{E}(a_d)\)</span></td>
</tr>
<tr class="even">
<td>Average estimand</td>
<td></td>
<td><span class="math inline">\(\mathbb{E}(a_m)\)</span></td>
</tr>
<tr class="odd">
<td>Power</td>
<td>Probability of rejecting null hypothesis of no effect</td>
<td><span class="math inline">\(\mathbb{E}(I(p \leq \alpha))\)</span></td>
</tr>
<tr class="even">
<td>Null risk</td>
<td>Probability of failing to reject null hypothesis of no effect</td>
<td><span class="math inline">\(\mathbb{E}(I(p &gt; \alpha))\)</span></td>
</tr>
<tr class="odd">
<td>Bias</td>
<td>Expected difference between estimate and estimand</td>
<td><span class="math inline">\(\mathbb{E}(a_d - a_m)\)</span></td>
</tr>
<tr class="even">
<td>Variance of the estimates</td>
<td></td>
<td><span class="math inline">\(\mathbb{V}(a_d)\)</span></td>
</tr>
<tr class="odd">
<td>True standard error</td>
<td></td>
<td><span class="math inline">\(\sqrt{\mathbb{V}(a_d)}\)</span></td>
</tr>
<tr class="even">
<td>Average estimated standard error</td>
<td></td>
<td><span class="math inline">\(\widehat\sigma(A)\)</span></td>
</tr>
<tr class="odd">
<td>Root mean-squared-error (RMSE)</td>
<td></td>
<td><span class="math inline">\(\sqrt{\mathbb{E}(a_d - a_m)}\)</span></td>
</tr>
<tr class="even">
<td>Coverage</td>
<td>Probability confidence interval overlaps estimand</td>
<td><span class="math inline">\(\Pr(\mathrm{covers}_{a_m})\)</span></td>
</tr>
<tr class="odd">
<td>Bias‐eliminated coverage</td>
<td>Probability confidence interval overlaps average estimate (<span class="citation" data-cites="morrisetal2019">Morris, White, and Crowther (<a href="../references.html#ref-morrisetal2019" role="doc-biblioref">2021</a>)</span>)</td>
<td><span class="math inline">\(\Pr(\mathrm{covers}_{a_d})\)</span></td>
</tr>
<tr class="even">
<td>Type-S error rate</td>
<td>Probability estimate has an incorrect sign, if statistically significant <span class="citation" data-cites="Gelman2014b">(<a href="../references.html#ref-Gelman2014b" role="doc-biblioref">Gelman and Carlin 2014</a>)</span>
</td>
<td><span class="math inline">\(\Pr(\mathrm{sgn}(a_d) \neq \mathrm{sgn}(a_m) \mid p \leq \alpha)\)</span></td>
</tr>
<tr class="odd">
<td>Exaggeration ratio</td>
<td>Expected ratio of absolute value of estimate to estimand, if statistically significant <span class="citation" data-cites="Gelman2014b">(<a href="../references.html#ref-Gelman2014b" role="doc-biblioref">Gelman and Carlin 2014</a>)</span>
</td>
<td><span class="math inline">\(\mathbb{E}( a_d / a_m \mid p \leq \alpha)\)</span></td>
</tr>
<tr class="even">
<td>Type I error</td>
<td>Rejecting the null hypothesis when it is true</td>
<td><span class="math inline">\(\Pr(p \leq \alpha \mid a_m = a^0)\)</span></td>
</tr>
<tr class="odd">
<td>Type II error</td>
<td>Failure to reject the null hypothesis when it is false</td>
<td><span class="math inline">\(\Pr(p \geq \alpha \mid a_m \neq a^0)\)</span></td>
</tr>
<tr class="even">
<td>Sampling bias</td>
<td>Expected difference between population average treatment effect and sample average treatment effect <span class="citation" data-cites="imai2008essential">(<a href="../references.html#ref-imai2008essential" role="doc-biblioref">Imai, King, and Stuart 2008</a>)</span>
</td>
<td><span class="math inline">\(\mathbb{E}(a_{m_{\mathrm{sample}}} - a_{m_{\mathrm{population}}})\)</span></td>
</tr>
<tr class="odd">
<td>Expected maximum cost</td>
<td>Maximum cost across possible realizations of the study</td>
<td><span class="math inline">\(\max{\mathrm{cost}}\)</span></td>
</tr>
<tr class="even">
<td>Bayesian learning</td>
<td>Difference between prior and posterior guess of the value of the estimand</td>
<td><span class="math inline">\(a_{m_{\mathrm{post}}} - a_{m_{\mathrm{pre}}}\)</span></td>
</tr>
<tr class="odd">
<td>Value for money</td>
<td>Probability that a decision based on estimated effect yields net benefits</td>
<td></td>
</tr>
<tr class="even">
<td>Success</td>
<td>Qualitative assessment of the success of a study</td>
<td></td>
</tr>
<tr class="odd">
<td>Minimum detectable effect (MDE)</td>
<td>Smallest effect size for which the power of the design is nominal (e.g., powered at 80%)</td>
<td><span class="math inline">\(\mathrm{argmin}_{a_{m_*}} \Pr(p \leq \alpha) = 0.8\)</span></td>
</tr>
<tr class="even">
<td>Robustness</td>
<td>Joint probability of rejecting the null hypothesis across multiple tests</td>
<td></td>
</tr>
<tr class="odd">
<td>Maximum proportion of subjects harmed</td>
<td></td>
<td><span class="math inline">\(\max{\Pr(\mathrm{harm})}\)</span></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section><section id="estimation-of-diagnosands" class="level2" data-number="10.3"><h2 data-number="10.3" class="anchored" data-anchor-id="estimation-of-diagnosands">
<span class="header-section-number">10.3</span> Estimation of diagnosands</h2>
<section id="analytic-design-diagnosis" class="level3" data-number="10.3.1"><h3 data-number="10.3.1" class="anchored" data-anchor-id="analytic-design-diagnosis">
<span class="header-section-number">10.3.1</span> Analytic design diagnosis</h3>
<p>Diagnosis can be done with analytic, pencil-and-paper methods. In an analytic design diagnosis, we typically derive a formula that returns the value of a diagnosand under a stipulated set of beliefs about the model, inquiry, data strategy, and answer strategy. For example, research design textbooks often contain analytic design diagnoses for statistical power. <span class="citation" data-cites="Gerber2012">Gerber and Green (<a href="../references.html#ref-Gerber2012" role="doc-biblioref">2012</a>)</span> write:</p>
<blockquote class="blockquote">
<p>“To illustrate a power analysis, consider a completely randomized experiment where <span class="math inline">\(N&gt;2\)</span> of <span class="math inline">\(N\)</span> units are selected into a binary treatment. The researcher must now make assumptions about the distributions of outcomes for treatment and for control units. In this example, the researcher assumes that the control group has a normally distributed outcome with mean <span class="math inline">\(\mu_c\)</span>, the treatment group has a normally distributed outcome with mean <span class="math inline">\(\mu_t\)</span>, and both group’s outcomes have a standard deviation <span class="math inline">\(\sigma\)</span>. The researcher must also choose <span class="math inline">\(\alpha\)</span>, the desired level of statistical significance (typically 0.05). Under this scenario, there exists a simple asymptotic approximation for the power of the experiment (assuming that the significance test is two-tailed): <span class="math display">\[
\beta = \Phi \bigg(\frac{|\mu_t - \mu_c| \sqrt{N}}{2\sigma} - \Phi^{-1} \left(1 - \frac{\alpha}{2}\right) \bigg)
\]</span> where <span class="math inline">\(\beta\)</span> is the statistical power of the experiment, <span class="math inline">\(\Phi(\cdot)\)</span> is the normal cumulative distribution function (CDF), and <span class="math inline">\(\Phi^{-1}(\cdot)\)</span> is the inverse of the normal CDF.”</p>
</blockquote>
<p>This power formula is usually motivated by a set of assumptions about <em>M</em>, <em>I</em>, <em>D</em>, and <em>A</em>. Under <em>M</em>, it usually assumes that both potential outcomes are normally distributed with group specific means and a common variance. Under <em>I</em>, it usually assumes the average treatment effect. Under <em>D</em>, it usually assumes a particular randomization strategy (simple random assignment). Under <em>A</em>, it usually assumes a particular hypothesis testing approach (equal variance <span class="math inline">\(t\)</span>-test with <span class="math inline">\(N - 2\)</span> degrees of freedom). Whether this set of assumptions is “close enough” will depend on the research setting.</p>
<p>Analytic design diagnosis can be hugely useful, since they cover a large families of designs that meet the scope criteria. For example, consider the “standard error” diagnosand <span class="math inline">\(\sqrt{\mathbb{E}[(a_{d_j} - \mathbb{E}[a_{d_j}])^2]}\)</span> for the Sample Average Treatment Effect estimate in a two arm trial with complete random assignment and estimation via difference in means. This has been worked out by statisticians to be <span class="math inline">\(\sqrt{\frac{1}{n-1}\left\{\frac{m\mathbb{V}(Y_i(0))}{n-m} + \frac{(N-m)\mathbb{V}(Y_i(1))}{m} + 2\mathrm{Cov}(Y_i(0), Y_i(1))\right\}}\)</span>, where <span class="math inline">\(N\)</span> is the number of units and <span class="math inline">\(m\)</span> is the number in treatment. The Neyman standard error estimator targets this quantity (see <a href="../library/experimental-causal.html#eq-neymanse" class="quarto-xref">Equation&nbsp;<span>18.2</span></a>). Many advances in our understanding of the properties of research design come from analytic design diagnosis. For example, <span class="citation" data-cites="middleton2008bias">Middleton (<a href="../references.html#ref-middleton2008bias" role="doc-biblioref">2008</a>)</span> and <span class="citation" data-cites="imai2009essential">Imai, King, and Nall (<a href="../references.html#ref-imai2009essential" role="doc-biblioref">2009</a>)</span> show that cluster randomized trials with heterogeneous cluster sizes are not unbiased for the ATE, which leads to the design recommendation that clustered trials should block on cluster size. These lessons apply broadly, more broadly perhaps than the lessons learned about a specific design in a specific Monte Carlo simulation.</p>
<p>That said, scholars conducting analytic design diagnosis have only worked out a few diagnosands for a limited set of designs. Since designs are so heterogeneous and can vary on so many dimensions, computer simulation is often the only feasible way to diagnose. We learn a lot from analytic design diagnosis—what the important parameters to consider are, what the important inferential problems are—but they often cannot provide direct answers to practical questions like, how many subjects do I need for my conjoint experiment? For that reason, we turn to design diagnosis via Monte Carlo simulation.</p>
</section><section id="design-diagnosis-by-simulation" class="level3" data-number="10.3.2"><h3 data-number="10.3.2" class="anchored" data-anchor-id="design-diagnosis-by-simulation">
<span class="header-section-number">10.3.2</span> Design diagnosis by simulation</h3>
<p>Research design diagnosis by simulation occurs in two steps. First we simulate research designs repeatedly, collecting diagnostic statistics from each run of the simulation. Second, we summarize the distribution of the diagnostic statistics in order to estimate the diagnosands.</p>
<p>Monte Carlo simulations of research designs can be written in any programming language. To illustrate the most common way of simulating a design—a for loop—we’ll write a concise simulation in base R code. <a href="#lem-ch10num1" class="quarto-xref">Diagnosis&nbsp;<span>10.1</span></a> conducts the simulation 500 times, each time, collecting the <span class="math inline">\(p\)</span>-value associated with a regression estimate of the average effect of an outcome on a treatment.</p>
<p>Loops like this one can be implemented in any language and they remain a good tool for design diagnosis. We think, however, writing simulations in this way obscures what parts of the design refer to the model, the inquiry, the data strategy, or the answer strategy. We might imagine <code>Z</code> and <code>Y</code> are generated by a data strategy that randomly assigns <code>Z</code>, then measures <code>Y</code> (though without a language for linking code to design steps, it’s a bit unclear). The answer strategy involves running a regression of <code>Y</code> on <code>Z</code>, then conducting a hypothesis test against the null hypothesis that the coefficient on <code>Z</code> is 0. The model and inquiry are left entirely implicit. The inquiry might be the ATE, but it might also be a question of whether the ATE is equal to zero. The model might include only two potential outcomes for each subject, or it might have more, we don’t know.</p>
<div id="lem-ch10num1" class="theorem lemma">
<p><span class="theorem-title"><strong>Diagnosis 10.1</strong></span> By-hand diagnosis example.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">sims</span> <span class="op">&lt;-</span> <span class="fl">500</span></span>
<span><span class="va">p.values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="va">sims</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">sims</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">Z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="va">U</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span>  <span class="va">Y</span> <span class="op">&lt;-</span> <span class="fl">0.2</span> <span class="op">*</span> <span class="va">Z</span> <span class="op">+</span> <span class="va">U</span></span>
<span>  <span class="va">p.values</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">Z</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">]</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">power</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">p.values</span> <span class="op">&lt;=</span> <span class="fl">0.05</span><span class="op">)</span></span>
<span><span class="va">power</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div id="tbl-forloop" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-forloop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.3: By-hand design diagnosis with a for-loop
</figcaption><div aria-describedby="tbl-forloop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table do-not-create-environment cell caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">power</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: center;">0.16</td>
</tr></tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</div>
<p>For this reason, we advocate for explicit description of all four research design components. Explicit design declaration can <em>also</em> occur in any programming language, but <code>DeclareDesign</code> is purpose-built for this task. We begin with the explicit declaration of the same two-arm trial as above. We have 100 subjects with a constant response to treatment of 0.2 units. Our inquiry is the average difference between the treated and untreated potential outcomes—the ATE. We assign treatment using complete random assignment and estimate treatment effects using the difference-in-means.</p>
<div id="def-ch10num1" class="declaration theorem definition">
<p><span class="theorem-title"><strong>Declaration 10.1</strong></span> Example of declaration using DeclareDesign</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">declaration_10.1</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">declare_model</span><span class="op">(</span></span>
<span>    N <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    U <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>,</span>
<span>    <span class="fu">potential_outcomes</span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span>  <span class="fl">0.2</span> <span class="op">*</span> <span class="va">Z</span> <span class="op">+</span> <span class="va">U</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">declare_inquiry</span><span class="op">(</span>ATE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Y_Z_1</span> <span class="op">-</span> <span class="va">Y_Z_0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">declare_assignment</span><span class="op">(</span>Z <span class="op">=</span> <span class="fu">complete_ra</span><span class="op">(</span><span class="va">N</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">declare_measurement</span><span class="op">(</span>Y <span class="op">=</span> <span class="fu">reveal_outcomes</span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">Z</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">declare_estimator</span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">Z</span>, inquiry <span class="op">=</span> <span class="st">"ATE"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="lem-ch10num2" class="theorem lemma">
<p><span class="theorem-title"><strong>Diagnosis 10.2</strong></span> Diagnosis in DeclareDesign</p>
<p>We can now diagnose the declared design. For comparison with the loop, we calculate just one diagnosand: statistical power. Both approaches return approximately the same answer. Any difference between the two can be attributed to simulation error, which is why <code>DeclareDesign</code> by default returns a bootstrapped standard error for each diagnosand estimate. If we were to increase the number of simulations for both approaches dramatically (100,000 simulations would be plenty), the differences would vanish.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">diagnosands</span> <span class="op">&lt;-</span> <span class="fu">declare_diagnosands</span><span class="op">(</span>power <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">p.value</span> <span class="op">&lt;=</span> <span class="fl">0.05</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">diagnosis</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">diagnose_design</span><span class="op">(</span><span class="va">declaration_10.1</span>, </span>
<span>                  diagnosands <span class="op">=</span> <span class="va">diagnosands</span><span class="op">)</span></span>
<span></span>
<span><span class="va">diagnosis</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div id="tbl-diagnsissimplydd" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-diagnsissimplydd-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.4: Design diagnosis using DeclareDesign
</figcaption><div aria-describedby="tbl-diagnsissimplydd-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table do-not-create-environment cell caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">power</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">se(power)</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">n_sims</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: center;">0.1615</td>
<td style="text-align: center;">0.0083482</td>
<td style="text-align: center;">2000</td>
</tr></tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</div>
<p>Backing up, we now construct that same diagnosis step-by-step. We build up from a single simulation run of the design to the distribution of simulations, to summaries of that distribution.</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">343</span><span class="op">)</span></span>
<span></span>
<span><span class="va">simulation_10.1</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">simulate_design</span><span class="op">(</span><span class="va">declaration_10.1</span>, sims <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>significant <span class="op">=</span> <span class="va">p.value</span> <span class="op">&lt;=</span> <span class="fl">0.05</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can run this simulation a single time with <code>run_design</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">run_design</span><span class="op">(</span><span class="va">declaration_10.1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div id="tbl-onesimulationdraw" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-onesimulationdraw-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.5: One simulation draw
</figcaption><div aria-describedby="tbl-onesimulationdraw-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table do-not-create-environment cell caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">estimand</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">estimate</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">std.error</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">p.value</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">conf.low</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">conf.high</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: center;">0.2</td>
<td style="text-align: center;">0.278</td>
<td style="text-align: center;">0.209</td>
<td style="text-align: center;">98</td>
<td style="text-align: center;">0.186</td>
<td style="text-align: center;">-0.136</td>
<td style="text-align: center;">0.692</td>
</tr></tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p><a href="#fig-ch10num3" class="quarto-xref">Figure&nbsp;<span>10.3</span></a> shows the information we might obtain from a single run of the simulation. The filled point is the estimate <span class="math inline">\(a_{d_j}\)</span>. The open triangle is the estimand <span class="math inline">\(a_{m_j}\)</span>. The bell-shaped curve is our normal-approximation based estimate of the sampling distribution. The standard deviation of this estimated distribution is our estimated standard error, which expresses our uncertainty. The confidence interval around the estimate is another expression of our uncertainty: We’re not sure where <span class="math inline">\(a_{d_j}\)</span> is, but if things are going according to plan, confidence intervals constructed this way will bracket <span class="math inline">\(a_{m_j}\)</span> 95% of the time.</p>
<div id="fig-ch10num3" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-ch10num3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../figures/figure-10-3.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Figure&nbsp;10.3: Visualization of one draw from a design diagnosis."><img src="../figures/figure-10-3.svg" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ch10num3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10.3: Visualization of one draw from a design diagnosis.
</figcaption></figure>
</div>
<p>From this single draw, we can’t yet estimate diagnosands, but we can calculate diagnostic statistics. The estimate was higher than the estimand in this draw, so the error is 0.45 - 0.20 = 0.25. Likewise, the squared error is (0.45 - 0.20)<span class="math inline">\(^2\)</span> = 0.0625. The <span class="math inline">\(p\)</span>-value is 0.01. This corresponds to the sum of the volumes of the two shaded areas in the right panel. It is above the threshold of 0.05, so the, so the “statistical significance” diagnostic statistic is equal to <code>FALSE</code>. The confidence interval stretches from 0.11 to 0.79, and since the value of the estimand (0.20) is between those bounds, the “covers” diagnostic statistic is equal to <code>TRUE</code>.</p>
<p>To calculate the distributions of the diagnostic statistics, we have to simulate designs not just once, but many times over. The bias diagnosand is the average error over many runs of the simulation. The statistical power diagnosand is the fraction of runs in which the estimate is significant. The coverage diagnosand is the frequency with which the confidence interval covers the estimand.</p>
<p><a href="#fig-ch10num4" class="quarto-xref">Figure&nbsp;<span>10.4</span></a> visualizes 10 runs of the simulation. We can see that some of the draws produce statistically significant estimates (the shaded areas are small and the confidence intervals don’t overlap with zero), but not all. We get a sense of the <em>true</em> standard error (the standard deviation of the estimates over multiple runs of the design) by seeing how the point estimates bounce around. We get a feel for the difference between the estimates of the standard error and true standard error. Design diagnosis is the process of learning about many ways the study might come out, not just the one way that it will.</p>
<div id="fig-ch10num4" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-ch10num4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../figures/figure-10-4.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Figure&nbsp;10.4: Visualization of ten draws from a design diagnosis."><img src="../figures/figure-10-4.svg" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ch10num4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10.4: Visualization of ten draws from a design diagnosis.
</figcaption></figure>
</div>
<p>In <a href="#lem-ch10num2" class="quarto-xref">Diagnosis&nbsp;<span>10.3</span></a>, one line of code does all of these steps at once. We simulate the design (500 times by default) to calculate the diagnostic statistics, then we summarize them in terms of bias, the true standard error, RMSE, power, and coverage.</p>
<div id="lem-ch10num2" class="theorem lemma">
<p><span class="theorem-title"><strong>Diagnosis 10.3</strong></span> Design diagnosis in one step</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">diagnosis_10.3</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">diagnose_design</span><span class="op">(</span></span>
<span>    <span class="va">declaration_10.1</span>,</span>
<span>    diagnosands <span class="op">=</span> <span class="fu">declare_diagnosands</span><span class="op">(</span></span>
<span>      bias <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">estimate</span> <span class="op">-</span> <span class="va">estimand</span><span class="op">)</span>,</span>
<span>      true_se <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span>,</span>
<span>      power <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">p.value</span> <span class="op">&lt;=</span> <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>      coverage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">estimand</span> <span class="op">&lt;=</span> <span class="va">conf.high</span> <span class="op">&amp;</span></span>
<span>                        <span class="va">estimand</span> <span class="op">&gt;=</span> <span class="va">conf.low</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div id="tbl-estimateddiagnosands" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-estimateddiagnosands-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.6: Diagnosand estimates with bootstrapped standard errors in parentheses
</figcaption><div aria-describedby="tbl-estimateddiagnosands-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table do-not-create-environment cell caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">bias</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">true se</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">power</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">coverage</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: center;">-0.00 (0.00)</td>
<td style="text-align: center;">0.20 (0.00)</td>
<td style="text-align: center;">0.17 (0.01)</td>
<td style="text-align: center;">0.96 (0.00)</td>
</tr></tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</div>
</section><section id="sec-ch10s3ss3" class="level3" data-number="10.3.3"><h3 data-number="10.3.3" class="anchored" data-anchor-id="sec-ch10s3ss3">
<span class="header-section-number">10.3.3</span> Simulation error</h3>
<p>We use Monte Carlo simulation to estimate diagnosands. We only get estimates—not the exact value—of diagnosands under a particular model because of simulation error. Simulation error declines as we conduct more simulations. When we conduct many thousands of simulations, we’re relatively certain of the value of the diagnosand under the model. If we conduct just tens of simulations, we are much more uncertain.</p>
<p>We can characterize our uncertainty regarding the diagnosand estimate by calculating a standard error. If the Monte Carlo standard error is large relative to the estimated diagnosand, then we need to increase the number of simulations. Unlike empirical settings where additional data collection can be very expensive, in order to get more observations of diagnostic statistics, we can just increase the number of simulations. Computation time isn’t free—but it’s cheap.</p>
<p>The standard error of diagnosand estimates can be calculated using standard formulas. If the diagnosand can be written as a population mean, and the simulations are fully independent, then we can estimate the standard error as <span class="math inline">\(\frac{\mathrm{sd}(\phi)}{\sqrt{k}}\)</span>, where <span class="math inline">\(k\)</span> is the number of simulations. The power diagnosand summarizes a binary diagnostic statistic (is the estimate significant or not). Binary variables that take a value of 1 with probability <span class="math inline">\(p\)</span> have variance <span class="math inline">\(p(1-p)\)</span>. So with 1,000 independent simulations, the standard error for the mean of a binary diagnostic statistic is <span class="math inline">\(\frac{\sqrt{p(1-p)} }{\sqrt{1000}}\)</span>. This level of simulation uncertainty is often acceptable (in the worst case when <span class="math inline">\(p=0.05\)</span>, the 95% confidence interval is approximately 4 * 0.016 = 6.4 percentage points wide), but if it isn’t, you can always increase the number of simulations.</p>
<p>Since some diagnosands are more complex than a population mean (i.e., we can’t characterize the estimation error with simple formulas), the <code>diagnose_design()</code> function uses the nonparametric bootstrap.</p>
</section></section><section id="how-to-diagnose-designs" class="level2" data-number="10.4"><h2 data-number="10.4" class="anchored" data-anchor-id="how-to-diagnose-designs">
<span class="header-section-number">10.4</span> How to diagnose designs</h2>
<section id="sec-ch10s4ss1" class="level3" data-number="10.4.1"><h3 data-number="10.4.1" class="anchored" data-anchor-id="sec-ch10s4ss1">
<span class="header-section-number">10.4.1</span> Exploring design tradeoffs</h3>
<p>Choosing among designs means choosing which diagnosands are important—and not all diagnosands are equally important for every study. For example, in a descriptive study whose goal is to estimate the fraction of people in France who are left-handed, statistical power is likely irrelevant. A hypothesis test against the null hypothesis that zero percent of the people in France are left-handed is preposterous (though we could of course have other policy relevant hypotheses). A much more important diagnosand for this study would be RMSE (root-mean-squared error), which is a measure of how well estimated the estimand is that incorporates both bias and variance.</p>
<p>Often, we need to look at several diagnosands in order to understand what might be going wrong. If our design exhibits “undercoverage” (e.g., a procedure for constructing “95%” confidence interval only covers the estimand 50% of the time), that might be because the standard errors are too small or because the point estimator is biased, or some combination of the two. In really perverse instances, we might have a biased point estimator which, thanks to overly wide confidence intervals, just happens to cover the estimand 95% of the time.</p>
<p>Many research design decisions involve trading off bias and variance. In trade-off settings, we may need to accept higher variance in order to decrease bias. Likewise, we may need to accept a bit of bias in order to achieve lower variance. The trade-off is captured by mean-squared error, which is the average squared distance between <span class="math inline">\(a_d\)</span> and <span class="math inline">\(a_m\)</span>. Of course, we would ideally like to have as low a mean-squared error as possible, that is, we would like to achieve low variance and low bias simultaneously.</p>
<p>To illustrate, consider the following three designs as represented by three targets. The inquiry is the bullseye of the target. The data and answer strategies combine to generate a process by which arrows are shot toward the target. On the left, we have a very bad archer: even though the estimates are unbiased in the sense that they hit the bullseye “on average”, very few of the arrows are on target. In the middle, we have an excellent shot: they are both on target and low variance. On the right, we have an archer who is very consistent (low variance) but biased. The mean squared error is highest on the left and lowest in the middle.</p>
<div id="fig-ch10num5" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-ch10num5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../figures/figure-10-5.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="Figure&nbsp;10.5: Visualization of the bias and variance of three ‘estimators’ of the bullseye"><img src="../figures/figure-10-5.svg" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ch10num5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10.5: Visualization of the bias and variance of three ‘estimators’ of the bullseye
</figcaption></figure>
</div>
<p>The archery metaphor is common in research design textbooks because it effectively conveys the difference between variance and bias, but it does elide an important point. It really matters <strong>which target</strong> the archer is shooting at. <a href="#fig-ch10num6" class="quarto-xref">Figure&nbsp;<span>10.6</span></a> shows a bizarre double-target representing two inquiries. The empirical strategy is unbiased and precise for the left inquiry, but it is clearly biased for the right inquiry. When we are describing the properties of an answer strategy, we have to be clear about which inquiry it is associated with.</p>
<div id="fig-ch10num6" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-ch10num6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../figures/figure-10-6.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="Figure&nbsp;10.6: The bias, variance, and RMSE of an answer strategy depend on the inquiry."><img src="../figures/figure-10-6.svg" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ch10num6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10.6: The bias, variance, and RMSE of an answer strategy depend on the inquiry.
</figcaption></figure>
</div>
<p>MSE is an exactly equal weighting of variance and bias (squared). Yet many other weightings of these two diagnosands are possible, and different researchers will vary in their weightings.</p>
<p>In evaluating a research design through diagnosis, we must construct a weighting of all relevant diagnosands. We can think of this as our research design utility function. Our utility function describes how important it is to study big questions, to shift beliefs in a research field, to overturn established findings, to obtain unbiased answers, and to get the sign of the inquiry right. When we compare across empirical designs, we compare them on this utility function that aggregates all the diagnosands according to their importance.</p>
<p>For example, we too often consider the diagnosand <em>power</em> on its own. This diagnosand is the probability of getting a statistically significant result, which of course depends on many things about your design, including, crucially, the unknown magnitude of the parameter to be estimated. But considering power alone is also misleading: no researcher wants to design a study that is 80% powered but returns highly biased estimates. Another way of saying this is that researchers always care about both power and bias. How much they care about each feature determines the weight of power and bias in their utility function.</p>
<p>Diagnosands need not be about hypothesis testing or even statistical analysis of the data at all. We often trade off how much we learn from a research design with its cost in terms of money and our time. We have financial and time budgets that provide hard constraints to our designs. Many researchers wish to select cheaper (or shorter) designs in order to carry out more studies or finish their degree sooner. Time and cost are also diagnostic statistics! We may wish to explore the maximum cost of a study or the average amount of time it would take.</p>
<p>Ethical considerations also often enter the process of assessing research designs, if implicitly. We can explicitly incorporate them into our utility function by caring about harm to subjects and the degree of informed consent. When collecting data, researchers often encounter a trade-off between informing subjects about the purpose of the study (an ethical consideration, or a requirement of the IRB) on the one hand and the bias that comes from Hawthorne or demand effects on the other. We can incorporate these considerations in a research design diagnosis by specifying diagnostic statistics related to the amount of disclosure about the purposes of research or the number of subjects harmed in the research. See <a href="../lifecycle/planning.html#sec-ch21s1ss1" class="quarto-xref"><span>Section 21.1.1</span></a> for an example.</p>
</section><section id="sec-ch10s4ss2" class="level3" data-number="10.4.2"><h3 data-number="10.4.2" class="anchored" data-anchor-id="sec-ch10s4ss2">
<span class="header-section-number">10.4.2</span> Diagnosis under model uncertainty</h3>
<p>We are always uncertain about the model in <em>M</em>. If we were certain of <em>M</em> (or there was no real dispute about it), there would be no need to conduct new empirical research. Research design diagnosis can incorporate this uncertainty by evaluating the performance of the design under alternative models. For example, if we are unsure of the exact value of the intra-cluster correlation (ICC), we can simulate the design under a range of plausible ICC values. If we are unsure of the true average treatment effect, we can diagnose the power of the study over a range of plausible effect sizes. Uncertainty over model inputs like the means, variances, and covariances in data that will eventually be collected is a major reason to simulate under a range of plausible values.</p>
<p>We illustrate diagnosis under model uncertainty with the declaration below. Here we have a 200-unit two-arm trial in which we explicitly describe our uncertainty over the value of the true average treatment effect. In the <code>potential_outcomes</code> call, we have <code>Y ~ runif(1, 0, 0.5) * Z + U</code> which indicates that the treatment effect in each run of the simulation is one draw from uniform distribution between 0.0 and 0.5.</p>
<div id="diagnosishetfx" class="definition">
<p>Declaration including model uncertainty</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">declaration_10.2</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">declare_model</span><span class="op">(</span></span>
<span>    N <span class="op">=</span> <span class="fl">200</span>, U <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>,</span>
<span>    <span class="co"># this runif(n = 1, min = 0, max = 0.5) </span></span>
<span>    <span class="co"># generates 1 random ATE between 0 and 0.5</span></span>
<span>    <span class="fu">potential_outcomes</span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span>, min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">*</span> <span class="va">Z</span> <span class="op">+</span> <span class="va">U</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">declare_inquiry</span><span class="op">(</span>ATE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Y_Z_1</span> <span class="op">-</span> <span class="va">Y_Z_0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">declare_assignment</span><span class="op">(</span>Z <span class="op">=</span> <span class="fu">complete_ra</span><span class="op">(</span><span class="va">N</span>, prob <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">declare_measurement</span><span class="op">(</span>Y <span class="op">=</span> <span class="fu">reveal_outcomes</span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">Z</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">declare_estimator</span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">Z</span>, inquiry <span class="op">=</span> <span class="st">"ATE"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="lem-ch10num4" class="theorem lemma">
<p><span class="theorem-title"><strong>Diagnosis 10.4</strong></span> Diagnosis under model uncertainty.</p>
<p><a href="#fig-ch10num7" class="quarto-xref">Figure&nbsp;<span>10.7</span></a> shows how the statistical power of this design varies over the set of model possibilities. We plot the possible effect sizes we entertain in the model on the horizontal axis and the statistical power on the vertical axis. We also plot a loess curve that flexibly smooths over the full distribution of effect sizes. We see that at low levels of the effect size, statistical power is quite poor. With only 200 subjects, we couldn’t achieve 80% statistical power unless the true effect size were approximately 0.45 standard deviations. The effect size at which a design achieves 80% power is often referred to as the minimum detectable effect size (MDE). This exercise shows how the MDE diagnosand is a summary of a design that admits uncertainty over the effect size. We return to this example in <a href="#sec-ch10s4ss2" class="quarto-xref"><span>Section 10.4.2</span></a>, when we redesign this study to learn how the MDE changes at different sample sizes.</p>
<p>What is “the” power of this design? Under one view, the true power of the design is the whichever value for power is associated with the effect size. But under an agnostic view, the ex ante “power” of the design is a weighted average of all these power values, weighted by the researcher’s prior beliefs over the distribution of possible effect sizes.</p>
<div id="fig-ch10num7" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-ch10num7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../figures/figure-10-7.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-7" title="Figure&nbsp;10.7: Diagnosing an experiment over uncertainty about the true effect size"><img src="../figures/figure-10-7.svg" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ch10num7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10.7: Diagnosing an experiment over uncertainty about the true effect size
</figcaption></figure>
</div>
</div>
</section><section id="adjudicating-between-competing-models" class="level3" data-number="10.4.3"><h3 data-number="10.4.3" class="anchored" data-anchor-id="adjudicating-between-competing-models">
<span class="header-section-number">10.4.3</span> Adjudicating between competing models</h3>
<p>The principle to design agnostically extends to <em>competing</em> models. Imagine that you believe <span class="math inline">\(M1\)</span> is true but that your scholarly rival believes <span class="math inline">\(M2\)</span> is true. Suppose that under <span class="math inline">\(M1\)</span>, the treatment affects <span class="math inline">\(Y1\)</span> but not <span class="math inline">\(Y2\)</span>. Your rival posits the reverse: Under <span class="math inline">\(M2\)</span>, the treatment affects <span class="math inline">\(Y2\)</span> but not <span class="math inline">\(Y1\)</span>. In the spirit of scientific progress, the both of you engage in an “adversarial collaboration.” You design a study together. The design you choose should, first, demonstrate <span class="math inline">\(M1\)</span> is true if it is true and, second, demonstrate <span class="math inline">\(M2\)</span> is true if <em>it</em> is true. In order to come to an agreement about the properties of the design, you will need to simulate the design under both models.</p>
<div id="diagnosisadjudicating" class="definition">
<p>Declaration of competing models.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">M1</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">declare_model</span><span class="op">(</span></span>
<span>    N <span class="op">=</span> <span class="fl">200</span>,</span>
<span>    U <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>,</span>
<span>    <span class="fu">potential_outcomes</span><span class="op">(</span><span class="va">Y1</span> <span class="op">~</span> <span class="fl">0.2</span> <span class="op">*</span> <span class="va">Z</span> <span class="op">+</span> <span class="va">U</span><span class="op">)</span>,</span>
<span>    <span class="fu">potential_outcomes</span><span class="op">(</span><span class="va">Y2</span> <span class="op">~</span> <span class="fl">0.0</span> <span class="op">*</span> <span class="va">Z</span> <span class="op">+</span> <span class="va">U</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">M2</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">declare_model</span><span class="op">(</span></span>
<span>    N <span class="op">=</span> <span class="fl">200</span>,</span>
<span>    U <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>,</span>
<span>    <span class="fu">potential_outcomes</span><span class="op">(</span><span class="va">Y1</span> <span class="op">~</span> <span class="fl">0.0</span> <span class="op">*</span> <span class="va">Z</span> <span class="op">+</span> <span class="va">U</span><span class="op">)</span>,</span>
<span>    <span class="fu">potential_outcomes</span><span class="op">(</span><span class="va">Y2</span> <span class="op">~</span> <span class="fl">0.2</span> <span class="op">*</span> <span class="va">Z</span> <span class="op">+</span> <span class="va">U</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">IDA</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">declare_inquiry</span><span class="op">(</span>ATE1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Y1_Z_1</span> <span class="op">-</span> <span class="va">Y1_Z_0</span><span class="op">)</span>,</span>
<span>                  ATE2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Y2_Z_1</span> <span class="op">-</span> <span class="va">Y2_Z_0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">declare_assignment</span><span class="op">(</span>Z <span class="op">=</span> <span class="fu">complete_ra</span><span class="op">(</span><span class="va">N</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">declare_measurement</span><span class="op">(</span>Y1 <span class="op">=</span> <span class="fu">reveal_outcomes</span><span class="op">(</span><span class="va">Y1</span> <span class="op">~</span> <span class="va">Z</span><span class="op">)</span>,</span>
<span>                      Y2 <span class="op">=</span> <span class="fu">reveal_outcomes</span><span class="op">(</span><span class="va">Y2</span> <span class="op">~</span> <span class="va">Z</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">declare_estimator</span><span class="op">(</span><span class="va">Y1</span> <span class="op">~</span> <span class="va">Z</span>, inquiry <span class="op">=</span> <span class="st">"ATE1"</span>, label <span class="op">=</span> <span class="st">"DIM1"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">declare_estimator</span><span class="op">(</span><span class="va">Y2</span> <span class="op">~</span> <span class="va">Z</span>, inquiry <span class="op">=</span> <span class="st">"ATE2"</span>, label <span class="op">=</span> <span class="st">"DIM2"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">declaration_10.3a</span> <span class="op">&lt;-</span> <span class="va">M1</span> <span class="op">+</span> <span class="va">IDA</span></span>
<span><span class="va">declaration_10.3b</span> <span class="op">&lt;-</span> <span class="va">M2</span> <span class="op">+</span> <span class="va">IDA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="lem-ch10num5" class="theorem lemma">
<p><span class="theorem-title"><strong>Diagnosis 10.5</strong></span> Diagnosis of competing models</p>
<p>To diagnose these alternative models, we count how frequently each perspective receives support. If we define support by statistical significance (other metrics are of course possible), then your model is supported if the effect of treatment on <span class="math inline">\(Y1\)</span> is significant but the effect on <span class="math inline">\(Y2\)</span> is not significant. If the reverse pattern is obtained, your rival can claim victory. Two kinds of split decisions are possible: neither estimate is significant, or both are. By simulation, we can estimate the rates of these four possibilities, under both your beliefs and those of your theoretical adversary.</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">diagnosis_10.5</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">diagnose_design</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declaration_10.3a</span>, <span class="va">declaration_10.3b</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div id="tbl-adjudicating" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-adjudicating-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.7: Design diagnosis under two alternative theories
</figcaption><div aria-describedby="tbl-adjudicating-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table do-not-create-environment cell caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">design</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Only theory 1 supported</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Only theory 2 supported</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Both supported</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Neither supported</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">design_1</td>
<td style="text-align: center;">0.2610</td>
<td style="text-align: center;">0.026</td>
<td style="text-align: center;">0.0260</td>
<td style="text-align: center;">0.687</td>
</tr>
<tr class="even">
<td style="text-align: center;">design_2</td>
<td style="text-align: center;">0.0255</td>
<td style="text-align: center;">0.260</td>
<td style="text-align: center;">0.0255</td>
<td style="text-align: center;">0.689</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>The diagnosis shows that the study is responsive to the truth. When theory 1 is correct, the design is more likely to yield empirical evidence in favor of it; the reverse holds when theory 2 is correct. That said, the major concern facing this adversarial collaboration is that the study is too small to resolve the dispute. About two thirds of the time—regardless of who is right!—neither theory receives support. This problem can be ameliorated either by elaborating more tests of each theoretical perspective or by increasing the size of the study.</p>
</div>
</section></section><section id="summary" class="level2" data-number="10.5"><h2 data-number="10.5" class="anchored" data-anchor-id="summary">
<span class="header-section-number">10.5</span> Summary</h2>
<p>Diagnosis is the process of estimating the properties of research designs under uncertain beliefs about the world. We simulate under many alternative designs because we want to choose designs that are strong under a large range of model possibilities. Each run of a design generates a diagnostic statistic. We learn about the distribution of the diagnostic statistic by running the design repeatedly. Diagnosands are summaries of the distribution of diagnostic statistics. Which diagnosands are most important will vary from study to study, and depend on the relative weight you place on one diagnosand versus another. Analytic design diagnosis is possible and can be quite powerful—we nevertheless recommend full simulation of research designs in order to learn about a range of diagnosands.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Gelman2014b" class="csl-entry" role="listitem">
Gelman, Andrew, and John Carlin. 2014. <span>“Beyond Power Calculations Assessing Type s (Sign) and Type m (Magnitude) Errors.”</span> <em>Perspectives on Psychological Science</em> 9 (6): 641–51.
</div>
<div id="ref-Gerber2012" class="csl-entry" role="listitem">
Gerber, Alan S., and Donald P. Green. 2012. <em><span class="nocase">Field Experiments: Design, Analysis, and Interpretation</span></em>. New York: W.W. Norton.
</div>
<div id="ref-imai2009essential" class="csl-entry" role="listitem">
Imai, Kosuke, Gary King, and Clayton Nall. 2009. <span>“The Essential Role of Pair Matching in Cluster-Randomized Experiments, with Application to the Mexican Universal Health Insurance Evaluation.”</span> <em>Statistical Science</em> 24 (1): 29–53.
</div>
<div id="ref-imai2008essential" class="csl-entry" role="listitem">
Imai, Kosuke, Gary King, and Elizabeth A. Stuart. 2008. <span>“Misunderstandings Between Experimentalists and Observationalists about Causal Inference.”</span> <em>Journal of the Royal Statistical Society: Series A (Statistics in Society)</em> 171 (2): 481–502.
</div>
<div id="ref-middleton2008bias" class="csl-entry" role="listitem">
Middleton, Joel A. 2008. <span>“Bias of the Regression Estimator for Experiments Using Clustered Random Assignment.”</span> <em>Statistics &amp; Probability Letters</em> 78 (16): 2654–59.
</div>
<div id="ref-morrisetal2019" class="csl-entry" role="listitem">
Morris, Tim P., Ian R. White, and Michael J. Crowther. 2021. <span>“Using Simulation Studies to Evaluate Statistical Methods.”</span> <em>Statistics in Medicine</em> 38 (11): 2074–2102.
</div>
<div id="ref-samii2012equivalencies" class="csl-entry" role="listitem">
Samii, Cyrus, and Peter M. Aronow. 2012. <span>“On Equivalencies Between Design-Based and Regression-Based Variance Estimators for Randomized Experiments.”</span> <em>Statistics &amp; Probability Letters</em> 82 (2): 365–70.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../declaration-diagnosis-redesign/choosing-answer-strategy.html" class="pagination-link" aria-label="Choosing an answer strategy">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Choosing an answer strategy</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../declaration-diagnosis-redesign/redesigning.html" class="pagination-link" aria-label="Redesigning">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Redesigning</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>


</body></html>